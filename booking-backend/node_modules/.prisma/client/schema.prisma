generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "debian-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql" // or "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id       String  @id @default(cuid())
  name     String
  email    String  @unique
  phone    String?
  password String?
  googleId String?
  role     String  @default("user")
  avatar   String?

  business Business?
  bookings Booking[]
}

model Business {
  id          String   @id @default(cuid())
  ownerId     String   @unique
  name        String
  description String?
  address     String?
  images      String[]

  owner    User      @relation(fields: [ownerId], references: [id])
  rooms    Room[]
  bookings Booking[]
}

model Room {
  id          String   @id @default(cuid())
  businessId  String
  title       String
  price       Float
  maxGuests   Int
  beds        Int
  description String?
  images      String[]
  available   Boolean  @default(true)

  business Business  @relation(fields: [businessId], references: [id])
  bookings Booking[]
}

model Booking {
  id         String   @id @default(cuid())
  userId     String
  roomId     String
  businessId String
  checkIn    DateTime
  checkOut   DateTime
  guests     Int
  totalPrice Float
  status     String   @default("confirmed")

  user     User     @relation(fields: [userId], references: [id])
  room     Room     @relation(fields: [roomId], references: [id])
  business Business @relation(fields: [businessId], references: [id])
}
